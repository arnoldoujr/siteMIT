define(['jquery','uiComponent','Magento_Customer/js/customer-data','ko','underscore','mage/apply/main','mage/apply/scripts','Swissup_Ajaxpro/js/modal-manager','mage/dataPost'],function($,Component,customerData,ko,_,mage,processScripts,ModalManager){'use strict';var config;return Component.extend({data:{},initialize:function(options){var self=this,sections=['ajaxpro-cart','ajaxpro-product','ajaxpro-reinit'];config=options;this._log('called "initialize"');this._log(options);_.each(sections,function(section){var ajaxproData=customerData.get(section);ajaxproData.extend({disposableCustomerData:section});self.update(ajaxproData());ajaxproData.subscribe(self._subscribe,self);});return this._super();},_log:function(data){if(config&&config.hasOwnProperty('debug')&&config.debug){console.log(data);}},_subscribe:function(updatedData){var keys;this._log('called "_subscribe" func');this._log(arguments);this._log(updatedData);this.isLoading(false);this.update(updatedData);keys=_.keys(updatedData);this._log(keys);setTimeout(function(){_.each(keys,$.proxy(ModalManager.show,ModalManager));$(mage.apply);processScripts();$('body').trigger('contentUpdated');_.each(keys,$.proxy(ModalManager.evalJs,ModalManager));},100);},isLoading:ko.observable(false),isActive:function(){return true;},afterRender:function(element){var el=$(element).closest('.block-ajaxpro');if(el){ModalManager.register(element.id,el);}},version:function(){return config.version;},update:function(updatedData){this._log('called "update" func');this._log(updatedData);_.each(updatedData,function(value,key){if(!this.data.hasOwnProperty(key)){this.data[key]=ko.observable();}
this.data[key](value);},this);},bindBlock:function(name){this._log('called "bindBlock"');this._log(name);if(!_.isUndefined(name)){if(!this.data.hasOwnProperty(name)){this.data[name]=ko.observable();}}
return this.data[name]();}});});